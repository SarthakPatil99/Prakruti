{%extends 'Admin/admin_base.html'%} {% load static %}

<!-- 
{% block title%}
Medicines
{%endblock title%}

{% block admin_title2%}
/home remedies
{%endblock admin_title2%} 
-->

{%block activeHR%}
<!-- Divider -->
<hr
  style="width: 15px; border: 3px solid rgb(255, 183, 0); border-radius: 5px; opacity: 80%; margin-top: 0%; margin-bottom: 1%;">
{% endblock activeHR%}

{% block body %}
<div class="d-flex justify-content-between">
  <button type="button" class="btn btn-warning mx-3 mb-3" data-toggle="modal" data-target="#HModal"
    onclick="transferHR()">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="21" fill="currentColor" class="bi bi-plus-circle"
      viewBox="0.5 2 15 16">
      <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
      <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
    </svg>
    New
  </button>

  <!-- Modal -->
  <div class="modal" id="HModal">
    <div class="modal-dialog">
      <div class="modal-content" style="border: none; background-color: rgb(221, 221, 221); z-index: 3">
        <div class="modal-header bg-secondary">
          <h4 class="modal-title text-warning" id="MTitle"></h4>
          <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"
            onclick="transferHR()"></button>
        </div>

        {% for message in messages %} {% if message.tags == "error" %}
        <div class="alert alert-danger alert-dismissible fade show msg" role="alert">
          <strong>{{ message.tags }}!</strong> {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endif %} {% endfor %}

        <div class="modal-body">
          <form action="/home_remedies/" method="post" enctype="multipart/form-data">
            <div class="row mx-0 mb-2">
              <div class="col-8">
                <div class="row mb-2">
                  <label for="name" class="form-label"><b>Remedy Title:</b></label>
                  <input type="text" class="form-control" id="Title" placeholder="Remedy title" name="title" required />
                </div>
                <div class="row">
                  <label for="formFile" class="form-label">
                    <b>Image:</b>
                  </label>
                  <input class="form-control -sm" type="file" name="inFile" id="inFile" accept="image/*"
                    onchange="validateImage()" required />
                </div>
              </div>
              <div class="col-4">
                <label for="Img" class="form-label">
                  <b>Remedy Image:</b>
                </label>
                <br />
                <center>
                  <img id="Img" src="../../static/img/close_cam.png" width="100%" />
                  <input type="hidden" name="ImgURL" id="setImgURL" value="">
                  <input type="hidden" name="hid" id="sethid" value="">
                </center>
              </div>
            </div>

            <div class="row mb-2">
              <div class="col-12 col-md-12 col-lg-12">
                <label for="Description" class="form-label">
                  <b>Description:</b>
                </label>
                <textarea class="form-control" id="Desc" placeholder="Remedy Description" name="description"
                  required></textarea>
              </div>
            </div>
{% csrf_token %}
            <div class="row mb-2">
              <div class="col-12 col-md-12 col-lg-12">
                <label for="Accessaries" class="form-label">
                  <b>Accessaries:</b>
                </label>
                <textarea class="form-control" id="Acce" placeholder="Required Accessaries" name="accessaries"
                  required></textarea>
              </div>
            </div>

            <button type="submit" name="submit" id="Submit" class="btn btn-warning text-gray-800 mt-2 float-right">
              Update
            </button>
            {% csrf_token %}
          </form>
        </div>
      </div>
    </div>
  </div>

  <form action="/home_remedies/" method="post" style="width: 45%;" class="mx-3">
    <div class="input-group">
      <div class="input-group-append">
        <select class="form-select form-control bg-light" style="width:120px; border-end-end-radius: 0px; border-start-end-radius: 0px;" id="Srch" name="srch" onchange="validateSrch()">
          <option selected value="0">Search Via</option>
          <option value="1">Name</option>
          <option value="2">RemedyID</option>
        </select>
      </div>  <input type="text" name="search" class="form-control bg-light" placeholder="Search for..." />
      <div class="input-group-append">
        <button class="btn btn-primary" type="submit" id="srchBtn" disabled>
          <i class="fas fa-search fa-sm"></i>
        </button>
      </div>
    </div>
  </form>
</div>

<table class="table table-hover table-bordered">
  <thead class="table-primary">
    <tr class="table_tr">
      <th>ID</th>
      <th>Picture</th>
      <th>Title</th>
      <th>Description</th>
      <th>Accessories</th>
      <th>Actions</th>
    </tr>
  </thead>
  {% for HR in HRs%}
  <tbody>
    <td width="1%" id="gethid{{HR.id}}">{{HR.id}}</td>
    <td width="1%">
      <img src="../../media/{{HR.Img}}" id="img{{HR.id}}" style="width: auto; max-height: 50px; border-radius: 5px;"
        alt="Italian Trulli">
    </td>
    <td id="title{{HR.id}}">{{HR.Name}}</td>
    <td id="desc{{HR.id}}">{{HR.Desc}}</td>
    <td id="acce{{HR.id}}">{{HR.Accessories}}</td>
    <td width="10%">
      <form action="/home_remedies/" method="post">
        <a type="submit" class="btn bg-success text-white my-1" data-toggle="modal" data-target="#HModal"
          onclick="transferHR({{HR.id}})">
          <i class="far fa-edit"></i>
        </a>
        <button type="submit" class="btn bg-danger text-white" name="remove" value="{{HR.id}}">
          <i class="far fa-trash-alt"></i>
        </button>
        {% csrf_token %}
      </form>
    </td>
    <input type="hidden" id="getImgURL{{HR.id}}" value="{{HR.Img}}">
  </tbody>
  {%endfor%}
  <tfoot></tfoot>
</table>
{% endblock body%}